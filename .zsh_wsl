# extra for WSL

export BGIMG=$HOME/Pictures/Shota/Shotachan/Telegram/photo_2017-12-10_10-15-54.jpg

# Startup
if [ -z "$WSL_INIT" ]; then
  umask 022
  export DISPLAY=:0
  export LC_ALL=zh_CN.UTF-8
  export QT_IM_MODULE=fcitx
  export GTK_IM_MODULE=fcitx
  export XMODIFIERS="@im=fcitx"
  sudome bash -c "cat $HOME/.hosts >> /etc/hosts"
  sudome mount -t tmpfs -o noatime,nodiratime,nodev tmpfs /tmp
  clear
  export WSL_INIT=1
fi

# Alias
alias cmd=cmd.exe
alias fm=explorer.exe

# Functions
function i3() {
  cd $HOME
  cmd.exe /c xinit.cmd
  compton -b
  feh --bg-fill $BGIMG
  /usr/bin/i3 &
}
function i3x() {
  ps a | egrep pts \
    && echo "shutting down i3 in 3s..." \
    && sleep 2
  pkill i3 || pkill -9 i3
  cmd.exe /c "taskkill /im vcxsrv.exe /f"
}
function im() {
  pkill -9 sogou-qimpanel
  pkill -9 fcitx
  (fcitx-autostart > /dev/null) &
  (sogou-qimpanel > /dev/null)  &
}
